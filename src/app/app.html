<div class="container">
  <div class="header">
    <h1>Random Phasmo</h1>
  </div>

  <div class="main-panel">
    <img class="orb" ngSrc="./assets/images/GhostOrb_Sprite.png" alt="" height="24" width="24">

    <div class="equipment-container" #equipmentContainer>
      <mat-checkbox [class.hidden]="randomized" (change)="handleObjectiveToggled($event.checked)">
        Ensure all objectives completable?
      </mat-checkbox>
      @if (!randomized) {
        @for (e of equipment; track e.name) {
          <div class="equipment">
            <h1>{{ e.name }}</h1>

            <div class="tiers">
              <div class="tier-container t1"
                   [class.locked]="e.locked && e.selectedTiers.includes(1)"
                   (click)="handleTierToggled(e, 1)">
                @if (e.selectedTiers.includes(1)) {
                  @if (e.locked) {
                    <h2>&#128274;</h2>
                  } @else {
                    <h2 class="green">&#10003;</h2>
                  }
                } @else {
                  <h2 class="red">&#128711;</h2>
                }
                <img class="output-image"
                     [class.not-selected]="!e.selectedTiers.includes(1)"
                     ngSrc="./assets/images/items/{{ e.imgPath }}/T1.webp"
                     alt="{{ e.name }} Tier 1"
                     height="500"
                     width="500"
                     priority>
              </div>
              <div class="tier-container t2"
                   [class.locked]="e.locked && e.selectedTiers.includes(2)"
                   (click)="handleTierToggled(e, 2)">
                @if (e.selectedTiers.includes(2)) {
                  @if (e.locked) {
                    <h2>&#128274;</h2>
                  } @else {
                    <h2 class="green">&#10003;</h2>
                  }
                } @else {
                  <h2 class="red">&#128711;</h2>
                }
                <img class="output-image"
                     [class.not-selected]="!e.selectedTiers.includes(2)"
                     ngSrc="./assets/images/items/{{ e.imgPath }}/T2.webp"
                     alt="{{ e.name }} Tier 2"
                     height="500"
                     width="500"
                     priority>
              </div>
              <div class="tier-container t3"
                   [class.locked]="e.locked && e.selectedTiers.includes(3)"
                   (click)="handleTierToggled(e, 3)">
                @if (e.selectedTiers.includes(3)) {
                  @if (e.locked) {
                    <h2>&#128274;</h2>
                  } @else {
                    <h2 class="green">&#10003;</h2>
                  }
                } @else {
                  <h2 class="red">&#128711;</h2>
                }
                <img class="output-image"
                     [class.not-selected]="!e.selectedTiers.includes(3)"
                     ngSrc="./assets/images/items/{{ e.imgPath }}/T3.webp"
                     alt="{{ e.name }} Tier 3"
                     height="500"
                     width="500"
                     priority>
              </div>
            </div>

            <div class="amount-container">
              <div class="amount">
                <h3>Min</h3>
                <div class="amount-stepper">
                  <button matIconButton
                          [class.disabled]="e.currentMinAmount === e.minAmount"
                          [disabled]="e.currentMinAmount === e.minAmount"
                          (click)="decrementMin(e)">
                    <mat-icon>remove</mat-icon>
                  </button>
                  <h2>{{ e.currentMinAmount }}</h2>
                  <button matIconButton
                          [class.disabled]="e.currentMinAmount === e.maxAmount"
                          [disabled]="e.currentMinAmount === e.maxAmount"
                          (click)="incrementMin(e)">
                    <mat-icon>add</mat-icon>
                  </button>
                </div>
              </div>

              <div class="amount">
                <h3>Max</h3>
                <div class="amount-stepper">
                  <button matIconButton
                          [class.disabled]="e.currentMaxAmount === e.minAmount"
                          [disabled]="e.currentMaxAmount === e.minAmount"
                          (click)="decrementMax(e)">
                    <mat-icon>remove</mat-icon>
                  </button>
                  <h2>{{ e.currentMaxAmount }}</h2>
                  <button matIconButton
                          [class.disabled]="e.currentMaxAmount === e.maxAmount"
                          [disabled]="e.currentMaxAmount === e.maxAmount"
                          (click)="incrementMax(e)">
                    <mat-icon>add</mat-icon>
                  </button>
                </div>
              </div>
            </div>
          </div>
        }
      } @else {
        @for (o of output; track o.name) {
          <div class="output"
               [class.none]="!o.amount">
            <h1 class="output-name">{{ o.name }}</h1>
            <div class="tiers">
              <div class="tier-container t1">
                <img class="output-image"
                     [class.not-selected]="o.tier !== 1 || !o.amount"
                     ngSrc="./assets/images/items/{{ o.imgPath }}/T1.webp"
                     alt="{{ o.name }} Tier 1"
                     height="500"
                     width="500"
                     priority>
              </div>
              <div class="tier-container t2">
                <img class="output-image"
                     [class.not-selected]="o.tier !== 2 || !o.amount"
                     ngSrc="./assets/images/items/{{ o.imgPath }}/T2.webp"
                     alt="{{ o.name }} Tier 2"
                     height="500"
                     width="500"
                     priority>
              </div>
              <div class="tier-container t3">
                <img class="output-image"
                     [class.not-selected]="o.tier !== 3 || !o.amount"
                     ngSrc="./assets/images/items/{{ o.imgPath }}/T3.webp"
                     alt="{{ o.name }} Tier 3"
                     height="500"
                     width="500"
                     priority>
              </div>
            </div>
            <div class="output-amount">
              @for (_num of [].constructor(o.maxAmount); let i = $index; track i) {
                @if (i < o.amount) {
                  <h1 class="tier-{{o.tier}}">&#9670;</h1>
                } @else {
                  <h1 class="none">&#11049;</h1>
                }
              }
            </div>
          </div>
        }
      }
    </div>

    <div class="button-group">
      <button matButton="tonal"
              [class.disabled]="randomized"
              [disabled]="randomized"
              (click)="randomize()">
        Randomize
      </button>

      <button matButton="tonal"
              [class.disabled]="!randomized"
              [disabled]="!randomized"
              (click)="reset()">
        Reset
      </button>
    </div>
  </div>

  <h5 class="disclaimer">v1.0.0<br>All content, images, and media sourced from Phasmophobia belongs to Kinetic Games.</h5>
</div>

<!-- The following code was taken from https://codepen.io/Ravyre/pen/gXawyY -->
<div class="fogwrapper">
  <div id="foglayer_01" class="fog">
    <div class="image01"></div>
    <div class="image02"></div>
  </div>
  <div id="foglayer_02" class="fog">
    <div class="image01"></div>
    <div class="image02"></div>
  </div>
  <div id="foglayer_03" class="fog">
    <div class="image01"></div>
    <div class="image02"></div>
  </div>
</div>